<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta property="twitter:card" content="summary_large_image"/><link rel="shortcut icon" type="image/svg" href="https://raw.githubusercontent.com/SparebankenVest/azure-key-vault-to-kubernetes/master/docs/images/akvk8s.png"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/><script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><style data-href="/styles.82da922ad340911f901b.css">@import url(https://fonts.googleapis.com/css?family=Roboto:300,400,500,700);body{font-family:Roboto}.graphic-toc{margin:10px;padding:0;width:auto;display:inline-block;width:220px}.graphic-toc-wrapper{display:block;margin:0;flex:1 1;padding:16px;text-align:right;min-height:150px}.graphic-toc-title{display:block;margin:0;padding:0;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s}.graphic-toc-title span{font-size:18px;line-height:1.5;font-weight:500}.graphic-toc-description{display:block;margin:10px 5px 5px;padding:0;text-align:left;color:#999;font-size:14px}.graphic-toc-link{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;-webkit-transition:border .2s ease 0s;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.graphic-toc-link:hover{color:#4188c2;text-decoration:none;border:1px solid #89b9cd}.video-responsive{position:relative;padding-bottom:56.2%}.video-responsive iframe{position:absolute;width:100%;height:100%}.diffNewLine{color:#22863a;background-color:#f0fff4}.diffRemoveLine{color:red;background-color:#fcc}.navBarParent{width:100%;float:left;display:flex;align-items:center}.divider{height:30px;margin:0 15px;border-right:1px solid hsla(0,0%,100%,.3)}.githubIcon{width:15px;margin-right:5px}.githubSection{display:flex;align-items:center;color:#000;opacity:.7}.githubSection:hover{text-decoration:none;opacity:1}.navbar-default .navbar-toggle .icon-bar{background-color:#fff!important}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#004478}.headerWrapper{border-bottom:1px solid #d4dadf;box-shadow:0 1px 1px 0 rgba(116,129,141,.1);display:flex;align-items:center}.formElement{background-color:transparent;padding:4px;border-bottom:1px solid hsla(0,0%,100%,.3)}.formElement:focus{outline:none;border:none}.formElement svg path{fill:#fff}.searchInput{width:calc(100% - 26px);background-color:transparent!important;border-width:0!important;color:hsla(0,0%,100%,.5)}.searchInput:focus,.searchInput:focus-within,.searchInput:hover,.searchInput:visited{outline:none;border:0}.searchWrapper{padding-left:0;padding-right:20px;flex:1 1;max-width:600px;position:relative}.searchWrapper a{font-weight:500}.hitWrapper{background-color:#fff;padding:4px;border-radius:4px;position:absolute;max-width:600px;top:40px;border:1px solid #ccc;box-shadow:0 1px 4px 0 rgba(0,0,0,.16);height:auto;max-height:80vh;overflow:scroll;left:0}.showResults{display:block}.hideResults{display:none}.hitWrapper span{color:#000;font-size:14px}.headerTitle a{color:#fff}.headerTitle a:hover{text-decoration:none;opacity:.8}.navBarCollapse{padding-left:0}.logoWrapper{padding:21px 0 21px 20px}.logoContent{font-family:Roboto;margin-left:16px;font-size:28px;line-height:1.5;font-weight:500;padding-right:10px}.navBarDefault{background-color:#2a76a2;border-radius:0;margin-bottom:0;border:0;display:flex;align-items:center;box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);-webkit-box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);-moz-box-shadow:-1px 0 4px 1px rgba(175,158,232,.8);-o-box-shadow:-1px 0 4px 1px rgba(175,158,232,.4);z-index:1;padding:15px}.navBarHeader{min-width:335px;padding-right:20px}.navBarBrand{height:auto;font-size:28px;line-height:1.5;font-weight:500;color:#fff!important;padding:0;display:flex;align-items:center}.navBarBrand img{width:40px;margin-right:16px;display:inline-block}.navBarUL li a{font-family:Roboto;color:#fff!important;font-size:16px;font-weight:500;line-height:1em;opacity:1}.navBarNav{display:flex;align-items:center}.navBarUL li a .shareIcon,.navBarUL li a img{width:20px}.mainWrapper{color:#3b454e;max-width:750px}.navBarUL li a:hover{opacity:.7}pre{border:0!important;background-color:#f5f7f9 /* !important; */}.mainWrapper ol,.mainWrapper ul{-webkit-padding-start:40px;-moz-padding-start:40px;-o-padding-start:40px;margin:24px 0;padding:0 0 0 2em}.mainWrapper ol li,.mainWrapper ul li{font-size:16px;line-height:1.8;font-weight:400}.headerNav{font-family:Roboto;padding:0 24px;color:#29cae6;font-size:16px;font-weight:500;line-height:1em}.headerNav a{color:#25b1dc}.headerNav a,.headerNav a:hover{text-decoration:none}.logoWrapper img{width:40px}.sideBarUL{margin-top:32px}.sideBarUL li{list-style-type:none;width:auto}.sideBarUL li a{color:#fff;font-size:14px;font-weight:500;line-height:1.5;padding:7px 25px 7px 10px;border:1px solid transparent;border-right:0}.rightSideTitle{font-size:10px;line-height:1;font-weight:700;text-transform:uppercase;letter-spacing:1.2px;padding:7px 24px 7px 16px;border-left:1px solid #e6ecf1;color:#9daab6}.rightSideBarUL{margin-top:32px}.rightSideBarUL li{list-style-type:none;border-left:1px solid #e6ecf1}.rightSideBarUL li a{font-size:12px;font-weight:500;line-height:1.5;padding:7px 24px 7px 16px}.hideFrontLine .collapser{background:transparent;border:none;outline:none;margin-top:7px;position:absolute;right:20px;z-index:1}.hideFrontLine .active>a{background-color:#003c52;color:#fff!important;border-top:1px solid #003346;border-bottom:1px solid #003346}.firstLevel ul li .collapser svg path{fill:#fff!important}.active .collapser>svg>path{fill:#006179!important}.firstLevel ul .item ul .item{border-left:1px solid #e6ecf1}.sideBarUL .item{list-style:none;padding:0}.sideBarUL .item>a{color:#fff;text-decoration:none;display:inline-block;position:relative;width:100%;padding-right:35px;padding-left:15px}.sideBarUL .item>a:hover{background-color:#00436a;color:#fff!important}.showFrontLine .item>a:hover{background-color:#00436a}.showFrontLine .active>a{color:#fff;background-color:#16608a}.sideBarUL .item .item{margin-left:16px}.firstLevel>ul>.item{margin-left:0!important}.showFrontLine .item .item{border-left:1px solid #e6ecf1;padding:0;width:calc(100% - 16px)!important}.showFrontLine .item .active>a{border-color:#e6ecf1!important;border-style:solid none solid solid;border-width:1px 0 1px 1px;background-color:#00436a;color:#fff}.titleWrapper{display:flex;align-items:center;padding-bottom:40px;border-bottom:1px solid #e6ecf1;margin-bottom:32px}.title{font-size:32px;line-height:1.5;font-weight:500;border-left:2px solid #367aba;flex:1 1;margin-top:0;padding:0 16px}.gitBtn{height:30px;min-height:30px;display:flex;align-items:center}.gitBtn img{width:15px;display:inline-block;margin-right:5px}.addPaddTopBottom{padding:50px 0}.nextPreviousWrapper{margin:0;padding:0;width:auto;display:grid;grid-template-rows:auto;-webkit-column-gap:24px;column-gap:24px;grid-template-columns:calc(50% - 8px) calc(50% - 8px)}.previousBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;-webkit-transition:border .2s ease 0s;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.leftArrow{color:#9daab6;flex:0 0 auto;font-size:24px;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s}.leftArrow,.preRightWrapper{display:block;margin:0;padding:16px}.preRightWrapper{flex:1 1;text-align:right}.smallContent{display:block;margin:0;padding:0;color:#9daab6}.smallContent span{font-size:12px;line-height:1.625;font-weight:400}.nextPreviousTitle{display:block;margin:0;padding:0;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s}.nextPreviousTitle span{font-size:16px;line-height:1.5;font-weight:500}.nextBtn{cursor:pointer;-moz-box-align:center;margin:0;padding:0;position:relative;display:flex;flex-direction:row;align-items:center;place-self:stretch;color:#242a31;background-color:#fff;border-radius:3px;border:1px solid #e6ecf1;-webkit-transition:border .2s ease 0s;transition:border .2s ease 0s;box-shadow:0 3px 8px 0 rgba(116,129,141,.1);text-decoration:none}.rightArrow{flex:0 0 auto;font-size:24px;-webkit-transition:color .2s ease 0s;transition:color .2s ease 0s;color:#9daab6}.nextRightWrapper,.rightArrow{padding:16px;display:block;margin:0}.nextRightWrapper{flex:1 1}.nextBtn:hover,.previousBtn:hover{color:#4188c2;text-decoration:none;border:1px solid #5799d7}.nextBtn:hover .rightArrow,.previousBtn:hover .leftArrow{color:#3167a4}table,table tr{padding:0}table tr{border-top:1px solid #ccc;background-color:#fff;margin:0}table tr:nth-child(2n){background-color:#f8f8f8}table tr th{font-weight:700}table tr td,table tr th{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td :last-child,table tr th :last-child{margin-bottom:0}img{max-width:100%}.githubBtn{font-size:16px;padding:10px 0 10px 15px}.githubBtn,.githubBtn span span{display:flex;align-items:center}.communitySection{font-size:24px;font-weight:700}.authorName,.authorSection{display:flex;align-items:center}.authorImg img{width:75px;height:75px;border-radius:50%;min-width:75px;max-width:75px;min-height:75px;max-height:75px}.authorDetails{padding-left:10px}.authorDesc{padding-top:5px;font-size:14px}.authorName img{margin-left:10px;display:inline-block;width:20px}.authorName img:hover{opacity:.7}@media (max-width:767px){hr{margin-top:0;margin-bottom:0}.navBarParent{display:block}.separator{margin-top:20px;margin-bottom:20px}.navBarULRight{position:static}.navbar-collapse{padding-left:0;padding-right:0}.navBarUL{display:flex;align-items:center;margin:7.5px 0}.navBarUL li a{font-size:14px;padding:10px}.navBarDefault{display:block}.navBarToggle{margin-right:0;height:44px}.navBarHeader{display:flex;min-width:auto;padding-right:0;align-items:center}.navBarBrand{font-size:20px;padding:15px 15px 15px 0;flex:1 1}.titleWrapper{padding:0 15px;display:block}.mobileView{text-align:center!important}.gitBtn{display:inline-block}.mainWrapper{padding:0 15px}.nextPreviousWrapper{display:block;padding:0 15px}.previousBtn{margin-bottom:20px}.mobileView{text-align:left!important;padding-left:0!important}.searchWrapper{padding:20px 0 10px}.hitWrapper{width:100%;right:0;top:35px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;position:static}}@media (min-width:768px) and (max-width:991px){.navBarDefault{padding:10px}.navBarBrand{font-size:22px}.navBarHeader{min-width:240px}.navBarCollapse{padding-right:10px;padding-left:10px}.githubBtn{padding:10px}.divider{margin:0 5px;height:20px}.hitWrapper{max-width:500px}.navBarUL li a{padding:10px 5px}.searchWrapper{padding-left:0}.navBarCollapse{display:flex!important;align-items:center}}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(50%,transparent),color-stop(50%,rgba(69,142,209,.04)));background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}</style><meta name="generator" content="Gatsby 2.18.6"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><style data-styled="" data-styled-version="4.4.1"></style><title data-react-helmet="true">authentication</title><link data-react-helmet="true" rel="canonical" href="https://akv4k8s.io/authentication"/><meta data-react-helmet="true" name="title" content="authentication"/><meta data-react-helmet="true" name="description" content="Learn about the different options for authenticating with Azure Key Vault."/><meta data-react-helmet="true" property="og:title" content="authentication"/><meta data-react-helmet="true" property="og:description" content="Learn about the different options for authenticating with Azure Key Vault."/><meta data-react-helmet="true" property="twitter:title" content="authentication"/><meta data-react-helmet="true" property="twitter:description" content="Learn about the different options for authenticating with Azure Key Vault."/><link as="script" rel="preload" href="/styles-ed2a8c5ff606f25e5f59.js"/><link as="script" rel="preload" href="/app-a0f4c619ab262b642547.js"/><link as="script" rel="preload" href="/commons-53494c96dcfd2d31bb07.js"/><link as="script" rel="preload" href="/webpack-runtime-7b44942c01bc2838e5f6.js"/><link as="fetch" rel="preload" href="/page-data/authentication/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><div class="navBarWrapper"><nav class="navbar navbar-default navBarDefault"><div class="navbar-header navBarHeader"><a class="navbar-brand navBarBrand" href="/"><img class="img-responsive" src="https://raw.githubusercontent.com/SparebankenVest/azure-key-vault-to-kubernetes/master/docs/images/akvk8s.png" alt="logo"/><div class="headerTitle">Azure Key Vault to Kubernetes</div></a><button type="button" class="navbar-toggle collapsed navBarToggle" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div id="navbar" class="navbar-collapse collapse navBarCollapse"><div class="visible-xs"><aside class="css-1wgygir"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/">Introduction</a></li><li class=" item "><a href="/installation">Installation</a></li><li class=" item "><button class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button><a href="/components">Components</a><ul><li class=" item "><a href="/components/1-controller">Controller</a></li><li class=" item "><a href="/components/2-env-injector">Env Injector</a></li><li class=" item "><a href="/components/3-when-to-use-which">When to use which?</a></li></ul></li><li class=" item "><a aria-current="page" class="" href="/authentication">Authentication</a></li><li class=" item "><a href="/authorization">Authorization</a></li><li class=" item "><button class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button><a href="/tutorials">Tutorials</a><ul><li class=" item "><a href="/tutorials/0-prerequisites">Prerequisites</a></li><li class=" item "><a href="/tutorials/1-secret">Get Secret</a></li><li class=" item "><a href="/tutorials/2-certificate">Get Certificate</a></li><li class=" item "><a href="/tutorials/3-multi-value-secret">Get Multi Value Secret</a></li><li class=" item "><a href="/tutorials/4-signing-key">Get Signing Key</a></li></ul></li><li class=" item "><a href="/examples">Examples</a></li><li class=" item "><a href="/reference">Reference</a></li><li class=" item "><a href="/how-it-works">How it Works</a></li></ul></li><li class="css-17hslul"><hr/></li></ul></aside><hr/></div><ul class="nav navbar-nav navBarUL navBarNav navbar-right navBarULRight"><li class="divider hidden-xs"></li><li class="githubBtn"><span><a href="https://github.com/SparebankenVest/azure-key-vault-to-kubernetes" data-show-count="true" aria-label="Star on GitHub">Star</a></span></li></ul></div></nav></div><div class="css-mrz1a6"><div class="hidden-xs css-2x76ca"><aside class="css-1wgygir"><ul class="sideBarUL"><li class="hideFrontLine firstLevel item "><ul><li class=" item "><a href="/">Introduction</a></li><li class=" item "><a href="/installation">Installation</a></li><li class=" item "><button class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button><a href="/components">Components</a><ul><li class=" item "><a href="/components/1-controller">Controller</a></li><li class=" item "><a href="/components/2-env-injector">Env Injector</a></li><li class=" item "><a href="/components/3-when-to-use-which">When to use which?</a></li></ul></li><li class=" item "><a aria-current="page" class="" href="/authentication">Authentication</a></li><li class=" item "><a href="/authorization">Authorization</a></li><li class=" item "><button class="collapser"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M0 7.33l2.829-2.83 9.175 9.339 9.167-9.339 2.829 2.83-11.996 12.17z"></path></svg></button><a href="/tutorials">Tutorials</a><ul><li class=" item "><a href="/tutorials/0-prerequisites">Prerequisites</a></li><li class=" item "><a href="/tutorials/1-secret">Get Secret</a></li><li class=" item "><a href="/tutorials/2-certificate">Get Certificate</a></li><li class=" item "><a href="/tutorials/3-multi-value-secret">Get Multi Value Secret</a></li><li class=" item "><a href="/tutorials/4-signing-key">Get Signing Key</a></li></ul></li><li class=" item "><a href="/examples">Examples</a></li><li class=" item "><a href="/reference">Reference</a></li><li class=" item "><a href="/how-it-works">How it Works</a></li></ul></li><li class="css-17hslul"><hr/></li></ul></aside></div><main class="css-1do55sm"><div class="css-1o7wuc9"><div class="titleWrapper"><h1 class="title">Authentication</h1><div class="mobileView css-1cyu0d5"><a href="https://github.com/SparebankenVest/azure-key-vault-to-kubernetes/tree/master/docs/content/authentication.md" class="gitBtn"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4yIiBiYXNlUHJvZmlsZT0idGlueSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiDQoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjM1MCAyMzE0LjgiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZD0iTTExNzUsMEM1MjUuOCwwLDAsNTI1LjgsMCwxMTc1YzAsNTUyLjIsMzc4LjksMTAxMC41LDg5MC4xLDExMzkuN2MtNS45LTE0LjctOC44LTM1LjMtOC44LTU1Ljh2LTE5OS44SDczNC40DQoJYy03OS4zLDAtMTUyLjgtMzUuMi0xODUuMS05OS45Yy0zOC4yLTcwLjUtNDQuMS0xNzkuMi0xNDEtMjQ2LjhjLTI5LjQtMjMuNS01LjktNDcsMjYuNC00NC4xYzYxLjcsMTcuNiwxMTEuNiw1OC44LDE1OC42LDEyMC40DQoJYzQ3LDYxLjcsNjcuNiw3Ni40LDE1NS43LDc2LjRjNDEuMSwwLDEwNS43LTIuOSwxNjQuNS0xMS44YzMyLjMtODIuMyw4OC4xLTE1NS43LDE1NS43LTE5MC45Yy0zOTMuNi00Ny01ODEuNi0yNDAuOS01ODEuNi01MDUuMw0KCWMwLTExNC42LDQ5LjktMjIzLjMsMTMyLjItMzE3LjNjLTI2LjQtOTEuMS02MS43LTI3OS4xLDExLjgtMzUyLjVjMTc2LjMsMCwyODIsMTE0LjYsMzA4LjQsMTQzLjljODguMS0yOS40LDE4NS4xLTQ3LDI4NC45LTQ3DQoJYzEwMi44LDAsMTk2LjgsMTcuNiwyODQuOSw0N2MyNi40LTI5LjQsMTMyLjItMTQzLjksMzA4LjQtMTQzLjljNzAuNSw3MC41LDM4LjIsMjYxLjQsOC44LDM1Mi41YzgyLjMsOTEuMSwxMjkuMywyMDIuNywxMjkuMywzMTcuMw0KCWMwLDI2NC40LTE4NS4xLDQ1OC4zLTU3NS43LDQ5OS40YzEwOC43LDU1LjgsMTg1LjEsMjE0LjQsMTg1LjEsMzMxLjlWMjI1NmMwLDguOC0yLjksMTcuNi0yLjksMjYuNA0KCUMyMDIxLDIxMjMuOCwyMzUwLDE2ODkuMSwyMzUwLDExNzVDMjM1MCw1MjUuOCwxODI0LjIsMCwxMTc1LDBMMTE3NSwweiIvPg0KPC9zdmc+DQo=" alt="Github logo"/> Edit on GitHub</a></div></div><div class="mainWrapper"><p class="css-kgl18x">By default both the Controller and the Env Injector will use the credentials found in Cloud Config on the host to authenticate with Azure Key Vault. This is the same credentials as the Kubernetes cluster use when interacting with Azure to create VM&#x27;s, Load Balancers and other cloud infrastructure.</p><p class="css-kgl18x"><strong>Note: if you do not run Kubernetes on Azure, <a href="#override-default-authentication" target="_blank" rel="noopener">override default authentication</a></strong>  </p><p class="css-kgl18x">Cloud Config for Azure is located at <code class="css-trsm9o">/etc/kubernetes/azure.json</code>. The Controller will map this as a read only volume and read the credentials. For the Env Injector it&#x27;s a bit different. Since the Env Injector is not in full control over how the original container is setup, it will copy the azure.json to a local shared volume, chmod <code class="css-trsm9o">azure.json</code> to 444 in case the original container is running under a less privileged user (which is a good practice) and not get access to the credentials.</p><p class="css-kgl18x">Currently only one situations has been identified, where the above does not work:</p><ul><li>When a <a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/" target="_blank" rel="noopener">Pod Security Policy</a> is configured in the cluster, preventing containers from reading from the host, two solutions exists:  <ol><li>Change the Pod Security Policy to list <code class="css-trsm9o">/etc/kubernetes/azure.json</code> under <a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/#volumes-and-file-systems" target="_blank" rel="noopener">AllowedHostPaths</a> </li><li>Or <a href="#override-default-authentication" target="_blank" rel="noopener">override default authentication</a>. </li></ol></li></ul><p class="css-kgl18x"><strong>For default authentication move to the next section about <a href="#authorization" target="_blank" rel="noopener">Authorization</a>. To override default authentication, read on.</strong></p><h3 id="overridedefaultauthentication" class="css-0">Override default authentication</h3><p class="css-kgl18x">It is possible to give the Controller and/or the Env Injector specific credentials to authenticate with Azure Key Vault.</p><p class="css-kgl18x">The authentication requirements for the Controller and Env Injector are covered below.</p><h4 id="customauthenticationforthecontroller" class="css-0">Custom Authentication for the Controller</h4><p class="css-kgl18x">The Controller will need Azure Key Vault credentials to get Secrets from Azure Key Vault and store them as Kubernetes Secrets. See <a href="#authentication-options" target="_blank" rel="noopener">Authentication options</a> below.</p><h4 id="customauthenticationforenvinjector" class="css-0">Custom Authentication for Env Injector</h4><p class="css-kgl18x">To use custom authentication for the Env Injector, set  the environment variable <code class="css-trsm9o">CUSTOM_AUTH</code> to <code class="css-trsm9o">true</code>.</p><p class="css-kgl18x">By default each Pod using the Env Injector pattern must provide their own credentials for Azure Key Vault using <a href="#authentication-options" target="_blank" rel="noopener">Authentication options</a> below.</p><p class="css-kgl18x">To avoid that, support for a more convenient solution is added where the Azure Key Vault credentials in the Env Injector (using <a href="#authentication-options" target="_blank" rel="noopener">Authentication options</a> below) is &quot;forwarded&quot; to the the Pods. This is enabled by setting the environment variable <code class="css-trsm9o">CUSTOM_AUTH_INJECT</code> to <code class="css-trsm9o">true</code>. Env Injector will then create a Kubernetes Secret containing the credentials and modify the Pod&#x27;s env section to reference the credentials in the Secret. </p><h4 id="customauthenticationoptions" class="css-0">Custom Authentication Options</h4><p class="css-kgl18x">The following authentication options are available:</p><table><thead><tr><th>Authentication type</th><th>Environment variable</th><th>Description</th></tr></thead><tbody><tr><td>Managed identities for Azure resources (used to be MSI)</td><td></td><td>No credentials are needed for managed identity authentication. The Kubernetes cluster must be running in Azure and the <code class="css-trsm9o">aad-pod-identity</code> controller must be installed. A <code class="css-trsm9o">AzureIdentity</code> and <code class="css-trsm9o">AzureIdentityBinding</code> must be defined. See <a href="https://github.com/Azure/aad-pod-identity" target="_blank" rel="noopener">https://github.com/Azure/aad-pod-identity</a> for details.</td></tr><tr><td>Client credentials</td><td>AZURE_TENANT_ID</td><td>The ID for the Active Directory tenant that the service principal belongs to.</td></tr><tr><td></td><td>AZURE_CLIENT_ID</td><td>The name or ID of the service principal.</td></tr><tr><td></td><td>AZURE_CLIENT_SECRET</td><td>The secret associated with the service principal.</td></tr><tr><td>Certificate</td><td>AZURE_TENANT_ID</td><td>The ID for the Active Directory tenant that the certificate is registered with.</td></tr><tr><td></td><td>AZURE_CLIENT_ID</td><td>The application client ID associated with the certificate.</td></tr><tr><td></td><td>AZURE_CERTIFICATE_PATH</td><td>The path to the client certificate file.</td></tr><tr><td></td><td>AZURE_CERTIFICATE_PASSWORD</td><td>The password for the client certificate.</td></tr><tr><td>Username/Password</td><td>AZURE_TENANT_ID</td><td>The ID for the Active Directory tenant that the user belongs to.</td></tr><tr><td></td><td>AZURE_CLIENT_ID</td><td>The application client ID.</td></tr><tr><td></td><td>AZURE_USERNAME</td><td>The username to sign in with.</td></tr><tr><td></td><td>AZURE_PASSWORD</td><td>The password to sign in with.</td></tr></tbody></table><p class="css-kgl18x"><strong>Note: These env variables are sensitive and should be stored in a Kubernetes <code class="css-trsm9o">Secret</code> resource, then referenced by <a href="https://kubernetes.io/docs/concepts/configuration/secret/#using-secrets-as-environment-variables" target="_blank" rel="noopener">Using Secrets as Environment Variables</a>.</strong> </p><p class="css-kgl18x">See official MS documentation for more details on how environment base authentication works for Azure: <a href="https://docs.microsoft.com/en-us/go/azure/azure-sdk-go-authorization#use-environment-based-authentication" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/go/azure/azure-sdk-go-authorization#use-environment-based-authentication</a></p></div><div class="addPaddTopBottom"><div class="nextPreviousWrapper"><a class="previousBtn" href="/components/3-when-to-use-which"><div class="leftArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></g></svg></div><div class="preRightWrapper"><div class="smallContent"><span>Previous</span></div><div class="nextPreviousTitle"><span>When to use which?</span></div></div></a><a class="nextBtn" href="/authorization"><div class="nextRightWrapper"><div class="smallContent"><span>Next</span></div><div class="nextPreviousTitle"><span>Authorization</span></div></div><div class="rightArrow"><svg preserveAspectRatio="xMidYMid meet" height="1em" width="1em" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" class="_13gjrqj"><g><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></g></svg></div></a></div></div></div></main><div class="hidden-xs css-1ig3yiy"><aside class="css-1vcvnke"><ul class="rightSideBarUL"><div class="rightSideTitle">CONTENTS</div><li class="css-om68wv"><a href="#overridedefaultauthentication" to="#overridedefaultauthentication">Override default authentication</a></li></ul></aside></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/authentication";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a0f4c619ab262b642547.js"],"component---src-templates-docs-js":[]};/*]]>*/</script><script src="/webpack-runtime-7b44942c01bc2838e5f6.js" async=""></script><script src="/commons-53494c96dcfd2d31bb07.js" async=""></script><script src="/app-a0f4c619ab262b642547.js" async=""></script><script src="/styles-ed2a8c5ff606f25e5f59.js" async=""></script><script>
            $(document).on('click','.navbar-collapse.in',function(e) {
              if( $(e.target).is('a') ) {
                $(this).collapse('hide');
              }
            });
            </script></body></html>